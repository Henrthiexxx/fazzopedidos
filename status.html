<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=yes" />
  <meta name="theme-color" content="#000000" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <title>Acompanhar Pedido</title>
  <style>
    :root{
      --black:#000000;
      --gray-900:#0a0a0a;
      --gray-800:#1a1a1a;
      --gray-700:#2a2a2a;
      --gray-600:#3a3a3a;
      --gray-500:#6b6b6b;
      --gray-400:#9b9b9b;
      --white:#ffffff;
      --success:#10b981;
      --warning:#f59e0b;
      --danger:#ef4444;
    }
    
    *{box-sizing:border-box;margin:0;padding:0}
    html{
      -webkit-text-size-adjust:100%;
      -webkit-tap-highlight-color:transparent
    }
    body{
      font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','Segoe UI',Roboto,sans-serif;
      background:var(--black);
      color:var(--white);
      -webkit-font-smoothing:antialiased;
      padding-bottom:40px
    }

    .container{
      max-width:800px;
      margin:0 auto;
      padding:20px
    }

    /* Header */
    .header{
      margin-bottom:24px
    }
    .header-top{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:8px
    }
    .title{
      font-size:28px;
      font-weight:700;
      letter-spacing:-0.02em
    }
    .order-id{
      font-size:14px;
      color:var(--gray-400);
      margin-top:4px
    }
    .btn-secondary{
      background:var(--gray-900);
      color:var(--white);
      border:1px solid var(--gray-800);
      padding:10px 16px;
      border-radius:12px;
      cursor:pointer;
      font-size:14px;
      font-weight:600;
      transition:all 0.2s
    }
    .btn-secondary:hover{
      background:var(--gray-800)
    }

    /* Alert Box */
    .alert{
      background:rgba(239,68,68,0.1);
      border:1px solid var(--danger);
      border-radius:16px;
      padding:16px;
      margin-bottom:20px;
      display:none;
      align-items:center;
      gap:12px
    }
    .alert.show{display:flex}
    .alert-icon{font-size:24px}
    .alert-text{
      flex:1;
      line-height:1.5
    }

    /* Cards */
    .card{
      background:var(--gray-900);
      border:1px solid var(--gray-800);
      border-radius:20px;
      padding:20px;
      margin-bottom:20px
    }
    .card-title{
      font-size:18px;
      font-weight:700;
      margin-bottom:16px;
      letter-spacing:-0.01em
    }
    .info-row{
      display:flex;
      justify-content:space-between;
      padding:12px 0;
      border-bottom:1px solid var(--gray-800)
    }
    .info-row:last-child{border-bottom:none}
    .info-label{
      color:var(--gray-400);
      font-size:14px
    }
    .info-value{
      font-weight:600;
      font-size:14px
    }
    .status-badge{
      display:inline-block;
      padding:6px 12px;
      border-radius:12px;
      font-size:13px;
      font-weight:600
    }
    .status-new{background:var(--gray-800);color:var(--gray-400)}
    .status-received{background:rgba(16,185,129,0.1);color:var(--success)}
    .status-preparing{background:rgba(59,130,246,0.1);color:#3b82f6}
    .status-ready{background:rgba(16,185,129,0.2);color:var(--success)}
    .status-done{background:rgba(16,185,129,0.3);color:var(--success)}
    .status-canceled{background:rgba(239,68,68,0.1);color:var(--danger)}

    /* Timeline */
    .timeline{
      list-style:none;
      padding:0;
      margin:16px 0 0
    }
    .timeline-item{
      display:flex;
      align-items:flex-start;
      gap:16px;
      padding:16px 0;
      position:relative
    }
    .timeline-item:not(:last-child)::before{
      content:'';
      position:absolute;
      left:19px;
      top:48px;
      bottom:-16px;
      width:2px;
      background:var(--gray-800)
    }
    .timeline-dot{
      width:40px;
      height:40px;
      border-radius:50%;
      background:var(--gray-900);
      border:2px solid var(--gray-800);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:16px;
      flex-shrink:0;
      z-index:1
    }
    .timeline-item.done .timeline-dot{
      background:var(--success);
      border-color:var(--success);
      color:var(--black)
    }
    .timeline-item.active .timeline-dot{
      background:rgba(59,130,246,0.2);
      border-color:#3b82f6;
      animation:pulse-blue 2s infinite
    }
    @keyframes pulse-blue{
      0%,100%{opacity:1;transform:scale(1)}
      50%{opacity:0.8;transform:scale(1.05)}
    }
    .timeline-item.canceled .timeline-dot{
      background:var(--danger);
      border-color:var(--danger);
      color:var(--white)
    }
    .timeline-content{
      flex:1;
      padding-top:8px
    }
    .timeline-label{
      font-size:15px;
      font-weight:600;
      margin-bottom:4px
    }
    .timeline-time{
      font-size:13px;
      color:var(--gray-500)
    }

    /* Items List */
    .item{
      display:flex;
      justify-content:space-between;
      padding:12px 0;
      border-bottom:1px solid var(--gray-800)
    }
    .item:last-child{border-bottom:none}
    .item-info{
      flex:1
    }
    .item-name{
      font-size:14px;
      font-weight:600;
      margin-bottom:4px
    }
    .item-details{
      font-size:12px;
      color:var(--gray-500)
    }
    .item-price{
      font-size:14px;
      font-weight:700;
      color:var(--white)
    }

    /* Orders List */
    .orders-list{
      display:none;
      margin:20px 0
    }
    .orders-list.show{display:block}
    .order-item{
      background:var(--gray-900);
      border:1px solid var(--gray-800);
      border-radius:16px;
      padding:16px;
      margin-bottom:12px;
      cursor:pointer;
      transition:all 0.2s
    }
    .order-item:hover{
      border-color:var(--gray-600);
      transform:translateX(4px)
    }
    .order-item.current{
      border-color:var(--success);
      background:rgba(16,185,129,0.05)
    }
    .order-item-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:8px
    }
    .order-item-id{
      font-size:14px;
      font-weight:700
    }
    .order-item-badge{
      display:inline-block;
      padding:4px 8px;
      border-radius:8px;
      font-size:11px;
      font-weight:600;
      background:var(--gray-800);
      color:var(--gray-400)
    }
    .order-item-footer{
      display:flex;
      justify-content:space-between;
      font-size:13px;
      color:var(--gray-500)
    }

    /* Notification Button */
    .btn-primary{
      width:100%;
      background:var(--white);
      color:var(--black);
      border:none;
      border-radius:12px;
      padding:14px;
      font-size:15px;
      font-weight:600;
      cursor:pointer;
      transition:all 0.2s
    }
    .btn-primary:hover{
      background:var(--gray-300)
    }
    .btn-primary:disabled{
      opacity:0.5;
      cursor:not-allowed
    }
    .notify-info{
      font-size:13px;
      color:var(--gray-500);
      margin-bottom:12px;
      line-height:1.5
    }

    /* Modal */
    .modal-backdrop{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.8);
      backdrop-filter:blur(8px);
      z-index:300;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
      opacity:0;
      animation:fadeIn 0.3s forwards
    }
    @keyframes fadeIn{to{opacity:1}}
    .modal{
      background:var(--gray-900);
      border:1px solid var(--gray-800);
      border-radius:24px;
      width:100%;
      max-width:420px;
      box-shadow:0 20px 40px rgba(0,0,0,0.6);
      transform:scale(0.9);
      animation:scaleIn 0.3s forwards
    }
    @keyframes scaleIn{to{transform:scale(1)}}
    .modal-header{
      padding:24px;
      border-bottom:1px solid var(--gray-800)
    }
    .modal-title{
      font-size:20px;
      font-weight:700;
      letter-spacing:-0.02em
    }
    .modal-body{
      padding:24px
    }
    .modal-body p{
      color:var(--gray-400);
      line-height:1.6;
      margin:0
    }
    .modal-footer{
      padding:24px;
      border-top:1px solid var(--gray-800)
    }
    .modal-footer .btn-primary{
      width:100%
    }

    /* Responsive */
    @media (max-width:640px){
      .container{padding:16px}
      .title{font-size:24px}
      .header-top{
        flex-direction:column;
        align-items:flex-start;
        gap:12px
      }
      .btn-secondary{
        width:100%
      }
      .card{padding:16px}
      .timeline-item{gap:12px}
      .timeline-dot{
        width:36px;
        height:36px;
        font-size:14px
      }
      .timeline-item:not(:last-child)::before{
        left:17px
      }
      .modal{
        border-radius:20px 20px 0 0;
        align-self:flex-end;
        animation:slideUp 0.3s forwards
      }
      @keyframes slideUp{
        from{transform:translateY(100%)}
        to{transform:translateY(0)}
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="header-top">
        <div>
          <h1 class="title">Seu Pedido</h1>
          <div class="order-id" id="orderId">‚Äî</div>
        </div>
        <button id="btnMyOrders" class="btn-secondary">üìã Meus Pedidos</button>
      </div>
    </div>

    <div id="ordersList" class="orders-list"></div>

    <div id="cancelAlert" class="alert">
      <div class="alert-icon">‚ö†Ô∏è</div>
      <div class="alert-text">
        <strong>Pedido Cancelado</strong><br>
        Este pedido foi cancelado pelo estabelecimento.
      </div>
    </div>

    <div class="card">
      <div class="info-row">
        <span class="info-label">Status</span>
        <span id="statusBadge" class="status-badge">‚Äî</span>
      </div>
      <div class="info-row">
        <span class="info-label">Total</span>
        <span class="info-value" id="totalValue">‚Äî</span>
      </div>
      <div class="info-row">
        <span class="info-label">Atualizado</span>
        <span class="info-value" id="updatedAt">‚Äî</span>
      </div>
    </div>

    <div class="card">
      <h2 class="card-title">Acompanhamento</h2>
      <ul id="timeline" class="timeline"></ul>
    </div>

    <div class="card">
      <h2 class="card-title">Notifica√ß√µes</h2>
      <p class="notify-info">Receba atualiza√ß√µes em tempo real sobre seu pedido direto no navegador.</p>
      <button id="enablePush" class="btn-primary">üîî Ativar Notifica√ß√µes</button>
    </div>

    <div class="card">
      <h2 class="card-title">Itens do Pedido</h2>
      <div id="itemsList"></div>
    </div>
  </div>

  <script type="module" src="./status.js"></script>
</body>
</html>
